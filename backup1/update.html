<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>E-Transapp</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="static/vendors/feather/feather.css">
  <link rel="stylesheet" href="static/vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="static/vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- <link rel="stylesheet" href="static/vendors/datatables.net-bs4/dataTables.bootstrap4.css"> -->
  <link rel="stylesheet" href="static/vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" type="text/css" href="static/js/select.dataTables.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="static/css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="static/images/favicon.png" />
</head>
<body onload="loaderfn();autoCall();">
  <div id="preload"></div>

  <div class="container-scroller">
    <!-- partial:partials/_navbar.html -->
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
        <!-- <a class="navbar-brand brand-logo mr-5" href="index.html"><img src="static/images/logo.svg" class="mr-2" alt="logo"/></a> -->
        <!-- <a class="navbar-brand brand-logo-mini" href="index.html"><img src="static/images/logo-mini.svg" alt="logo"/></a> -->
        <a class="navbar-brand brand-logo mr-5" href="index.html">logo</a>
        <a class="navbar-brand brand-logo-mini" href="index.html">logo</a>

      </div>
      <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
       
        <ul class="navbar-nav mr-lg-2">
          <li class="nav-item nav-search d-none d-lg-block">
            <div class="input-group">
              <div class="input-group-prepend hover-cursor" id="navbar-search-icon">
                <span class="input-group-text" id="search">
                  <i class="icon-search"></i>
                </span>
              </div>
              <input type="text" class="form-control" id="navbar-search-input" placeholder="Search now" aria-label="search" aria-describedby="search">
            </div>
          </li>
        </ul>
        <ul class="navbar-nav navbar-nav-right">
       
          <li class="nav-item nav-profile dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
              <img src="static/images/faces/face28.jpg" alt="profile"/>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
              <a class="dropdown-item">
                <i class="ti-settings text-primary"></i>
                Settings
              </a>
              <a class="dropdown-item">
                <i class="ti-power-off text-primary"></i>
                Logout
              </a>
            </div>
          </li>
       
        </ul>
     
      </div>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_settings-panel.html -->
 
   
      <!-- partial -->
      <!-- partial:partials/_sidebar.html -->
   
      <!-- partial -->
      <div class="main-panel">
        <div class="content-wrapper px-2">
          <div class="row">
            <div class="col-12">
              <div class="row">
                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                  <h3 class="font-weight-bold">Welcome User</h3>
                </div>
                <div class="col-12 col-xl-4">
                 <div class="justify-content-center d-flex">
                   <div class="input-group">
                    <input type="text" class="form-control" id="navbar-search-input" placeholder="Consignment No" aria-label="search" aria-describedby="search">
                    <div class="input-group-prepend hover-cursor" id="navbar-search-icon">
                      <span class="input-group-text" id="search">
                        <i class="icon-search"></i>
                      </span>
                    </div>
                  </div>
                 </div>
                </div>
              </div>
              <!-- Consignment details -->
              <div class="row mt-2">
                <div class="col-12 stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title text-center mb-0">Consignment Details</p>
                      <div class="table-responsive">
                        <table class="table table-borderless">
                          <tbody id="consignment_det_tbody">
                           
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
               
              </div>
              <!-- Tracking details -->
              <div class="row mt-1">
                <div class="col-12 stretch-card">
                  <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <p class="card-title">Tracking Details</p>
                            <a onclick="event.preventDefault();gotoAddStatus();" class="text-info">Add Status</a>
                           </div>
                      <div class="table-responsive">
                        <table class="table table-striped table-borderless">
                          <thead>
                            <tr>
                              <th>Status</th>
                              <th>Location</th>
                              <th>Mode</th>
                              <th>Note</th>
                              <th>Comments</th>
                              <th>Action</th>
                           
                            </tr>  
                          </thead>
                          <tbody id="tracking_det_tbody">
                           
                           
                           
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              
              </div>
            </div>
          </div>
      
         
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer.html -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2022. <a href="#" target="_blank">E-Transapp</a>All rights reserved.</span>
          </div>
        </footer>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->

  <!-- plugins:js -->
  <script src="static/vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <!-- <script src="static/vendors/chart.js/Chart.min.js"></script> -->
  <script src="static/vendors/datatables.net/jquery.dataTables.js"></script>
  <!-- <script src="static/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script> -->
  <script src="static/js/dataTables.select.min.js"></script>

  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <!-- <script src="static/js/off-canvas.js"></script> -->
  <script src="static/js/hoverable-collapse.js"></script>
  <script src="static/js/template.js"></script>
  <script src="static/js/settings.js"></script>
  <!-- <script src="static/js/todolist.js"></script> -->
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="static/js/dashboard.js"></script>
  <script src="static/js/extra/script.js"></script>

  <!-- <script src="static/js/Chart.roundedBarCharts.js"></script> -->
  <!-- End custom js for this page-->
  <script type="text/javascript">
    function autoCall(){
    loader.style.display="block";
    base_url='https://mobilelogistics.herokuapp.com/api/update';
    newArray=[];
    id=sessionStorage.getItem('consignment_id')
    newArray.push({'name':'consignment_id', 'value':id})

    custom_ajax_iFunction(base_url,newArray).then(data=>{if(data['data']=='success'){
      console.log(data["dbdata"]["Docket_No"],"this is problem");
      html='';
      html2='';

for(i=0;i<1;i++){
  // htmlTr2=''
  
  htmlTr=''
  htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Consignment No:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Docket_No"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Booking Date:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Booking_Date"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Consignor Name:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ConsignorID"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Consignee Name:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ConsigneeID"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Source:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Source"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Destination:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Destination"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Goods Description:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["GoodsDescription"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>No of Package:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["NoofPacakge"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';

    htmlTr=htmlTr + '<tr>';
    htmlTr=htmlTr + '<td>Actual Weight:</td>';
    htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ActualWeight"][i] +'</td>';
    htmlTr=htmlTr + '</tr>';
    html=html+htmlTr;
  



    // htmlTr2=htmlTr2 + '<tr>';
    // htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["event"][i] +'</td>';
    // htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["location"][i] +'</td>';
    // htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["mode"][i] +'</td>';
    // htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["note"][i] +'</td>';
    // htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["comments"][i] +'</td>';
    // htmlTr2=htmlTr2 + `<td>  <div class="dropdown">
    //                             <button class="btn btn-danger p-1" type="button" id="dropdownMenuIconButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    //                               <i class="ti-settings"></i>
    //                             </button>
    //                             <div class="dropdown-menu" aria-labelledby="dropdownMenuIconButton2">
    //                               <a class="dropdown-item" href="#">Edit</a>
    //                               <a class="dropdown-item" href="#">Delete</a>
    //                               <a class="dropdown-item" href="#">Mail</a>
    //                               <a class="dropdown-item" href="#">SMS</a>
    //                             </div>
    //                           </div></td>`;
    // htmlTr2=htmlTr2 + '<tr>';
    // html2=html2+htmlTr2;

    sessionStorage.setItem('consignment_id', data["dbdata"]["Docket_No"][i])


    } //end for loop
$("#consignment_det_tbody").html(html);
// $("#tracking_det_tbody").html(html2);
for(i=0;i<data["dbdata"]["Docket_No"].length;i++){
  htmlTr2=''
  
  // htmlTr=''
  // htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Consignment No:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Docket_No"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Booking Date:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Booking_Date"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Consignor Name:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ConsignorID"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Consignee Name:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ConsigneeID"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Source:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Source"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Destination:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["Destination"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Goods Description:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["GoodsDescription"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>No of Package:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["NoofPacakge"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';

  //   htmlTr=htmlTr + '<tr>';
  //   htmlTr=htmlTr + '<td>Actual Weight:</td>';
  //   htmlTr=htmlTr + '<td class="font-weight-bold">'+ data["dbdata"]["ActualWeight"][i] +'</td>';
  //   htmlTr=htmlTr + '</tr>';
  //   html=html+htmlTr;
  



    htmlTr2=htmlTr2 + '<tr>';
    htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["event"][i] +'</td>';
    htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["location"][i] +'</td>';
    htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["mode"][i] +'</td>';
    htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["note"][i] +'</td>';
    htmlTr2=htmlTr2 + '<td>'+ data["dbdata"]["comments"][i] +'</td>';
    htmlTr2=htmlTr2 + `<td>  <div class="dropdown">
                                <button class="btn btn-danger p-1" type="button" id="dropdownMenuIconButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="ti-settings"></i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuIconButton2">
                                  <a class="dropdown-item" href="#">Edit</a>
                                  <a class="dropdown-item" href="#">Delete</a>
                                  <a class="dropdown-item" href="#">Mail</a>
                                  <a class="dropdown-item" href="#">SMS</a>
                                </div>
                              </div></td>`;
    htmlTr2=htmlTr2 + '<tr>';
    html2=html2+htmlTr2;

    sessionStorage.setItem('consignment_id', data["dbdata"]["Docket_No"][i])


    } //end for loop
// $("#consignment_det_tbody").html(html);
$("#tracking_det_tbody").html(html2);

// Tracking loop start



    loader.style.display="none";
  }}).catch(err=>{console.log(err);loader.style.display="none";}); //end custom_ajax_iFunction
}  // auto call end
  </script>
  <script type="text/javascript">
    gotoAddStatus=()=>{
    window.location.href = "addStatus.html";
    } //end gotoAddStatus
  </script>
</body>

</html>

